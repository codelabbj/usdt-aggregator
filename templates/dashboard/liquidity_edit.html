{% extends "base.html" %}
{% block title %}Liquidité {{ config.trade_type }} - Dashboard{% endblock %}
{% block content %}
<div class="page-header">
  <h1>Liquidité – {{ config.get_trade_type_display }}</h1>
  <p>Montants min/max pour filtrer les offres. Choisissez si la plage est en fiat (ex. FCFA) ou en USDT.</p>
</div>
<div class="card card-form">
  <form method="post" class="liquidity-edit-form">
    {% csrf_token %}
    <section class="form-section">
      <h3 class="form-section-title">Unité de la plage</h3>
      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="amount_in_fiat" {% if config.amount_in_fiat %}checked{% endif %}>
          <span>Plage en fiat</span>
        </label>
        <p class="form-hint">Si coché : min/max en devise (ex. FCFA), filtre sur min_fiat/max_fiat des offres. Sinon : min/max en USDT, filtre sur min_usdt/max_usdt.</p>
      </div>
    </section>
    <section class="form-section">
      <h3 class="form-section-title">Montants</h3>
      <div class="form-row form-row-two">
        <div class="form-group">
          <label for="min_amount">Montant minimum</label>
          <input type="number" id="min_amount" name="min_amount" step="any" value="{{ config.min_amount|default:0 }}" min="0" required>
        </div>
        <div class="form-group">
          <label for="max_amount">Montant maximum</label>
          <input type="number" id="max_amount" name="max_amount" step="any" value="{% if config.max_amount %}{{ config.max_amount }}{% endif %}" min="0" placeholder="Laisser vide pour pas de limite">
        </div>
      </div>
    </section>
    <section class="form-section">
      <h3 class="form-section-title">Règle de filtrage</h3>
      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="require_inclusion" {% if config.require_inclusion %}checked{% endif %}>
          <span>Inclusion stricte</span>
        </label>
        <p class="form-hint">Si coché : ne garder que les offres dont la plage est incluse dans [min, max]. Sinon : chevauchement suffit.</p>
      </div>
    </section>
    <section class="form-section">
      <h3 class="form-section-title">État</h3>
      <div class="form-group">
        <label class="checkbox-label">
          <input type="checkbox" name="active" {% if config.active %}checked{% endif %}>
          <span>Config active</span>
        </label>
      </div>
    </section>
    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Enregistrer</button>
      <a href="{% url 'dashboard:liquidity_config' %}" class="btn btn-secondary">Annuler</a>
    </div>
  </form>
</div>
<style>
.card-form { max-width: 32rem; }
.liquidity-edit-form .form-section { margin-bottom: 1.75rem; }
.liquidity-edit-form .form-section:last-of-type { margin-bottom: 0; }
.form-section-title { font-size: 0.8rem; font-weight: 600; text-transform: uppercase; letter-spacing: 0.03em; color: var(--text-muted); margin: 0 0 0.75rem 0; padding-bottom: 0.35rem; border-bottom: 1px solid var(--card-border); }
.form-row { display: flex; gap: 1rem; flex-wrap: wrap; }
.form-row-two .form-group { flex: 1; min-width: 10rem; }
.form-group label:not(.checkbox-label) { display: block; font-weight: 500; margin-bottom: 0.35rem; font-size: 0.9rem; }
.form-group input[type="number"] { width: 100%; max-width: 14rem; padding: 0.5rem 0.75rem; border: 1px solid var(--card-border); border-radius: var(--radius-sm); }
.checkbox-label { display: inline-flex; align-items: center; gap: 0.5rem; font-weight: 500; cursor: pointer; }
.checkbox-label input { width: 1.1rem; height: 1.1rem; }
.form-hint { font-size: 0.85rem; color: var(--text-muted); margin: 0.35rem 0 0 0; line-height: 1.4; }
.form-actions { margin-top: 1.5rem; padding-top: 1.25rem; border-top: 1px solid var(--card-border); display: flex; gap: 0.75rem; }
.btn-primary { background: var(--accent); color: #fff; border: none; padding: 0.5rem 1.25rem; border-radius: var(--radius-sm); font-weight: 500; cursor: pointer; }
.btn-primary:hover { background: var(--accent-hover); }
</style>
{% endblock %}
